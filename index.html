<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>RCADE ç¤¾åŒºç¦åˆ© â€“ TGE èµ„æ ¼æ‰¹é‡æŸ¥è¯¢</title>
<meta name="color-scheme" content="light dark">
<style>
:root{
  --bg:#f4f5f7;--card:#fff;--txt:#202124;--sub:#70757a;
  --accent:#0066d9;--accent-dark:#004fa9;--ok:#16a34a;--bad:#dc2626}
@media(prefers-color-scheme:dark){
  :root{--bg:#1a1c1f;--card:#202225;--txt:#e8eaed;--sub:#9aa0a6}}
*{box-sizing:border-box;margin:0;padding:0;font-family:-apple-system,Segoe UI,PingFang SC,Helvetica,Arial,sans-serif}
body{background:var(--bg);color:var(--txt);padding:32px 16px;display:flex;justify-content:center}
.container{max-width:720px;width:100%;background:var(--card);border-radius:16px;padding:32px;box-shadow:0 12px 28px rgba(0,0,0,.08)}
h1{font-size:22px;margin-bottom:20px;color:var(--accent);text-align:center}
label{font-weight:700;margin-top:20px;display:block}
textarea{
  width:100%;min-height:150px;padding:12px;font-size:14px;border:1px solid #ccc;border-radius:10px;
  background:var(--card);color:var(--txt);resize:vertical}
button,summary{
  user-select:none;
  display:inline-block;cursor:pointer;border:none;border-radius:10px;padding:12px 16px;font-size:14px;
  background:var(--accent);color:#fff;transition:.2s;margin-top:20px;text-align:center}
button:hover,summary:hover{background:var(--accent-dark)}
small{color:var(--sub);font-size:13px;margin-left:6px}
.tools{display:flex;flex-wrap:wrap;gap:12px;margin-top:10px}
.switch{display:flex;align-items:center;gap:6px;font-size:14px;margin-top:24px}
.switch input{accent-color:var(--accent);cursor:pointer}
.resultBox{margin-top:28px;display:none}
.count{font-size:15px;margin-bottom:10px}
pre{
  white-space:pre-wrap;word-break:break-all;
  font-family:JetBrains Mono,Consolas,monospace;font-size:13px;
  background:var(--bg);padding:18px;border-radius:12px;overflow:auto}
.ok{color:var(--ok);font-weight:700}
.bad{color:var(--bad);font-weight:700}
footer{margin-top:26px;text-align:center;font-size:14px}
footer a{color:var(--accent);text-decoration:none;font-weight:700}
footer a:hover{text-decoration:underline}
</style>
</head>
<body>
<div class="container">
  <h1>RCADE ç¤¾åŒºç¦åˆ© â€“ TGE èµ„æ ¼æ‰¹é‡æŸ¥è¯¢</h1>

  <label for="addrInput">è¾“å…¥å¾…æŸ¥è¯¢åœ°å€ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰<small>è‡ªåŠ¨å»é‡ / æ ¡éªŒ</small></label>
  <textarea id="addrInput" placeholder=""></textarea>

  <div class="tools">
    <button id="checkBtn">å¼€å§‹æŸ¥è¯¢</button>
    <button id="copyBtn" style="display:none">å¤åˆ¶ç¬¦åˆåœ°å€</button>
  </div>

  <label class="switch"><input type="checkbox" id="showPassOnly">åªçœ‹ç¬¦åˆèµ„æ ¼</label>

  <div class="resultBox" id="outBox">
    <div class="count" id="stats"></div>
    <pre id="matchList"></pre>
  </div>

  <footer>ğŸ¦ å…³æ³¨ä½œè€…æ¨ç‰¹ <a href="https://x.com/0xXIAOc" target="_blank">@0xXIAOc</a></footer>
</div>

<script>
/* ------- è½½å…¥åå°èµ„æ ¼åå• eligible.txt ------- */
let eligibleSet=new Set();
fetch('eligible.txt?'+Date.now())
  .then(r=>r.text())
  .then(txt=>{
    eligibleSet=new Set(txt.split(/\r?\n/).map(s=>s.trim().toLowerCase()).filter(Boolean));
    console.log('loaded',eligibleSet.size);
  })
  .catch(e=>alert('æ— æ³•åŠ è½½èµ„æ ¼åå•ï¼š'+e));

/* ------- å·¥å…· ------- */
const $=id=>document.getElementById(id);
const addrReg=/^0x[a-fA-F0-9]{40}$/;

function sanitizeInput(raw){
  const seen=new Set(),valid=[];
  raw.split(/\r?\n/).forEach(s=>{
    const a=s.trim().toLowerCase();
    if(addrReg.test(a)&&!seen.has(a)){valid.push(a);seen.add(a);}
  });
  return valid;
}

/* ------- æŸ¥è¯¢é€»è¾‘ ------- */
$('checkBtn').addEventListener('click',()=>{
  if(!eligibleSet.size){alert('èµ„æ ¼åå•å°šæœªåŠ è½½ï¼Œè¯·ç¨å€™é‡è¯•');return;}

  const list=sanitizeInput($('addrInput').value);
  if(!list.length){alert('è¯·è¾“å…¥æœ‰æ•ˆçš„ä»¥ 0x å¼€å¤´çš„ 40 ä½åœ°å€');return;}

  let okCount=0,rows=[];
  list.forEach((addr,idx)=>{
    const ok=eligibleSet.has(addr);
    if(ok) okCount++;
    const cls=ok?'ok':'bad';
    rows.push(`${idx+1}. <span class="${cls}">${addr}</span>`);
  });

  $('stats').textContent=`ç¬¦åˆèµ„æ ¼ ${okCount} / æŸ¥è¯¢æ€»æ•° ${list.length}`;
  $('matchList').innerHTML=rows.join('\n');
  $('outBox').style.display='block';
  $('copyBtn').style.display= okCount? 'inline-block':'none';
});

/* ------- å¤åˆ¶ç¬¦åˆèµ„æ ¼ ------- */
$('copyBtn').addEventListener('click',()=>{
  const lines=[...$('matchList').querySelectorAll('.ok')].map(e=>e.textContent);
  navigator.clipboard.writeText(lines.join('\n'))
    .then(()=>alert('å·²å¤åˆ¶ '+lines.length+' ä¸ªåœ°å€'))
    .catch(()=>alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©æ–‡æœ¬'));
});

/* ------- è¿‡æ»¤åˆ‡æ¢ ------- */
$('showPassOnly').addEventListener('change',e=>{
  const hide = e.target.checked;
  [...$('matchList').querySelectorAll('.bad')].forEach(el=>{
    el.parentElement.style.display = hide ? 'none' : '';
  });
});
</script>
</body>
</html>
